<div class="product-grid-container">

  <!-- POS Header -->
  <app-pos-header [isOnline]="isOnline" [cartItemCount]="cartItemCount" (openCart)="openCartSidebar()"
    (refresh)="refreshData()">
  </app-pos-header>

  <!-- Product Filters -->
  <app-product-filters [categories]="categories" [selectedCategory]="selectedCategory" [searchTerm]="searchTerm"
    (search)="onSearch($event)" (categoryChange)="filterByCategory($event)">
  </app-product-filters>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="loading-spinner"></div>
    <p class="loading-text">Loading products...</p>
  </div>

  <!-- Products Grid -->
  <div *ngIf="!isLoading" class="products-grid">
    <app-product-card *ngFor="let product of paginatedProducts; trackBy: trackByProduct" [product]="product"
      (addToCart)="addToCart($event)">
    </app-product-card>
  </div>

  <!-- Load More Button -->
  <div *ngIf="!isLoading && hasMoreProducts()" class="load-more-container">
    <button class="btn btn-primary load-more-btn" (click)="loadMoreProducts()">
      <svg class="btn-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"
          stroke-linejoin="round" />
      </svg>
      Load More Products
    </button>
  </div>

  <!-- Empty State -->
  <div *ngIf="!isLoading && filteredProducts.length === 0" class="empty-state">
    <div class="empty-icon">
      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round" />
      </svg>
    </div>
    <h3 class="empty-title">No products found</h3>
    <p class="empty-description">
      {{ searchTerm ? 'Try adjusting your search terms' : 'No products available in this category' }}
    </p>
    <button class="btn btn-primary" (click)="refreshData()">
      Refresh Products
    </button>
  </div>

  <!-- Cart Sidebar Component -->
  <app-pos-cart-sidebar [isOpen]="isCartOpen" (close)="closeCartSidebar()" (checkout)="proceedToCheckout()">
  </app-pos-cart-sidebar>

  <!-- Checkout Sidebar -->
  <app-checkout-sidebar [isOpen]="isCheckoutOpen" (close)="closeCheckout()"
    (transactionComplete)="onTransactionComplete($event)"></app-checkout-sidebar>
</div>