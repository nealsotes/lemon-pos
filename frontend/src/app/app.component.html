<div class="app-container">
  <!-- Header -->
  <header class="app-header" *ngIf="!isLoginPage">
    <div class="header-content">
      <div class="header-left">
        <!-- Hamburger Menu Button (Mobile Only) -->
        <button class="hamburger-btn" *ngIf="!isLoginPage" (click)="toggleMobileMenu()" aria-label="Toggle menu">
          <svg class="hamburger-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 12h18M3 6h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>

        <div class="logo">
          <div class="logo-icon">
            <div class="logo-bg">FB</div>
          </div>
          <span class="logo-text">finnbites POS</span>
        </div>
      </div>
      
      <!-- Desktop Navigation -->
      <nav class="header-nav desktop-nav" *ngIf="!isLoginPage">
        <a *ngIf="isPageEnabled('/pos')" routerLink="/pos" routerLinkActive="active" class="nav-link">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 3h18v18H3V3z" stroke="currentColor" stroke-width="2"/>
            <path d="M7 7h10v10H7V7z" stroke="currentColor" stroke-width="2"/>
            <path d="M9 9h6v6H9V9z" fill="currentColor"/>
          </svg>
          <span class="nav-text">POS</span>
        </a>
        <a *ngIf="isPageEnabled('/cart')" routerLink="/cart" routerLinkActive="active" class="nav-link">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 0 1-2 2H9a2 2 0 0 1-2-2v-6m8 0V9a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v4.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span class="nav-text">Cart</span>
        </a>
        <a *ngIf="(isOwner || isAdmin) && isPageEnabled('/reports')" routerLink="/reports" routerLinkActive="active" class="nav-link">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 3v18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M7 14l4-4 4 4 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span class="nav-text">Reports</span>
        </a>
        <a *ngIf="(isOwner || isAdmin) && isPageEnabled('/products')" routerLink="/products" routerLinkActive="active" class="nav-link">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span class="nav-text">Products</span>
        </a>
        <a *ngIf="(isOwner || isAdmin) && isPageEnabled('/inventory')" routerLink="/inventory" routerLinkActive="active" class="nav-link">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M20 7h-4M4 7h4m0 0V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2m-6 4v6m4-6v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span class="nav-text">Inventory</span>
        </a>
        <a *ngIf="isAdmin" routerLink="/settings" routerLinkActive="active" class="nav-link">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span class="nav-text">Settings</span>
        </a>
      </nav>
      
      <div class="header-right" *ngIf="!isLoginPage">
        <div class="cart-indicator" *ngIf="cartItemCount > 0">
          <svg class="cart-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 0 1-2 2H9a2 2 0 0 1-2-2v-6m8 0V9a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v4.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span class="cart-count">{{ cartItemCount }}</span>
        </div>
        <div class="status-indicator" [class.online]="offlineService.isOnline$ | async" [class.offline]="!(offlineService.isOnline$ | async)">
          <div class="status-dot"></div>
          <span class="status-text">{{ (offlineService.isOnline$ | async) ? 'Online' : 'Offline' }}</span>
        </div>
        <button class="btn-logout" (click)="logout()" title="Logout">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M16 17l5-5-5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M21 12H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
    </div>
  </header>

  <!-- Mobile Menu Overlay -->
  <div class="mobile-menu-overlay" *ngIf="!isLoginPage" [class.active]="mobileMenuOpen" (click)="closeMobileMenu()"></div>

  <!-- Mobile Menu Sidebar -->
  <nav class="mobile-menu" *ngIf="!isLoginPage" [class.open]="mobileMenuOpen">
    <div class="mobile-menu-header">
      <div class="mobile-menu-logo">
        <div class="logo-icon">
          <div class="logo-bg">FB</div>
        </div>
        <span class="logo-text">finnbites POS</span>
      </div>
      <button class="close-menu-btn" (click)="closeMobileMenu()" aria-label="Close menu">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
    </div>

    <div class="mobile-menu-content">
      <a *ngIf="isPageEnabled('/pos')" routerLink="/pos" routerLinkActive="active" class="mobile-nav-link" (click)="closeMobileMenu()">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 3h18v18H3V3z" stroke="currentColor" stroke-width="2"/>
          <path d="M7 7h10v10H7V7z" stroke="currentColor" stroke-width="2"/>
          <path d="M9 9h6v6H9V9z" fill="currentColor"/>
        </svg>
        <span class="nav-text">Point of Sale</span>
        <svg class="nav-arrow" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M9 18l6-6-6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </a>

      <a *ngIf="isPageEnabled('/cart')" routerLink="/cart" routerLinkActive="active" class="mobile-nav-link" (click)="closeMobileMenu()">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 0 1-2 2H9a2 2 0 0 1-2-2v-6m8 0V9a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v4.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span class="nav-text">Shopping Cart</span>
        <svg class="nav-arrow" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M9 18l6-6-6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </a>

      <a *ngIf="(isOwner || isAdmin) && isPageEnabled('/reports')" routerLink="/reports" routerLinkActive="active" class="mobile-nav-link" (click)="closeMobileMenu()">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 3v18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M7 14l4-4 4 4 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span class="nav-text">Sales Reports</span>
        <svg class="nav-arrow" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M9 18l6-6-6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </a>

      <a *ngIf="(isOwner || isAdmin) && isPageEnabled('/products')" routerLink="/products" routerLinkActive="active" class="mobile-nav-link" (click)="closeMobileMenu()">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span class="nav-text">Product Management</span>
        <svg class="nav-arrow" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M9 18l6-6-6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </a>

      <a *ngIf="(isOwner || isAdmin) && isPageEnabled('/inventory')" routerLink="/inventory" routerLinkActive="active" class="mobile-nav-link" (click)="closeMobileMenu()">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M20 7h-4M4 7h4m0 0V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2m-6 4v6m4-6v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span class="nav-text">Inventory</span>
        <svg class="nav-arrow" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M9 18l6-6-6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </a>

      <a *ngIf="isAdmin" routerLink="/settings" routerLinkActive="active" class="mobile-nav-link" (click)="closeMobileMenu()">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span class="nav-text">Settings</span>
        <svg class="nav-arrow" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M9 18l6-6-6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </a>
    </div>

    <div class="mobile-menu-footer">
      <div class="status-indicator" [class.online]="offlineService.isOnline$ | async" [class.offline]="!(offlineService.isOnline$ | async)">
        <div class="status-dot"></div>
        <span class="status-text">{{ (offlineService.isOnline$ | async) ? 'Online' : 'Offline' }}</span>
      </div>
      <div class="mobile-menu-info">
        <p>Version 1.0.0</p>
        <p>PWA Ready • Offline Capable</p>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="app-main">
    <div class="main-container">
      <router-outlet></router-outlet>
    </div>
  </main>

  <!-- Decorative Heart Flow -->
  <div class="heart-fall" aria-hidden="true">
    <span class="heart heart-1">❤</span>
    <span class="heart heart-2">❤</span>
    <span class="heart heart-3">❤</span>
    <span class="heart heart-4">❤</span>
    <span class="heart heart-5">❤</span>
  </div>

  <!-- Footer -->
  <footer class="app-footer">
    <div class="footer-content">
      <p>&copy; 2025 finnbites POS. All rights reserved.</p>
      <div class="footer-links">
        <span>Version 1.0.0</span>
        <span>•</span>
        <span>PWA Ready</span>
        <span>•</span>
        <span>Offline Capable</span>
      </div>
    </div>
  </footer>

  <!-- PWA Install Banner -->
  <app-pwa-install></app-pwa-install>
</div>
